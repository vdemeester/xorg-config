#!/bin/sh
# lock the screen using whats there, if it's there
# Use i3lock if present
command -v i3lock 2>&1 >/dev/null && {
    I3LOCK_OPTS=""
    PICTURES_FOLDER=$(xdg-user-dir PICTURES)
    HOSTNAME=$(hostname)
    test -e $PICTURES_FOLDER/.${HOSTNAME}.screensaver.png && {
        I3LOCK_OPTS="-t -i $PICTURES_FOLDER/.${HOSTNAME}.screensaver.png"
    } || {
        I3LOCK_OPTS="-c 333333"
    }
    i3lock $I3LOCK_OPTS
    exit 0
}
# Us slimlock instead (if present)
command -v slimlock 2>&1 >/dev/null && {
    slimlock
    exit 0
}
# Use slock instead (if present)
command -v slock 2>&1 >/dev/null && {
    slock
    exit 0
}
# Issue a message using a custom notify script
notify -u critical "lock" "No lock software available [i3lock, slock]"
